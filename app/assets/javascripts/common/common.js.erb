/**
 * Created by Геннадий on 28.08.2015.
 */

function asset_path(name) {
    assets = {
        'bottle.png': '<%= asset_path "bottle.png" %>',
        'Alien.png': '<%= asset_path "Alien.png" %>',
        'drinks.png': '<%= asset_path "drinks.png" %>',
        'new.png': '<%= asset_path "new.png" %>',
        'info.html': '<%= asset_path "info.html" %>',
        'new_point.html': '<%= asset_path "new_point.html" %>',
        'send_message.png': '<%= asset_path "send_message.png" %>',
        'event.png': '<%= asset_path "event.png" %>',
        'message.png': '<%= asset_path "message.png" %>',
        'alert.mp3': '<%= asset_path "alert.mp3" %>'
    };
    return assets[name]||'none';
}
function iconForPoint(type) {
    var icon = asset_path('bottle.png');
    switch (type) {
        case 'shop':
            break;
        case 'marker':
        {
            icon = asset_path('event.png');
            break;
        }
        case 'message':
        {
            icon = asset_path('message.png');
            break;
        }
        case 'bar':
        {
            icon = asset_path('drinks.png');
            break;
        }
    }
    return icon;
}
var up = localStorage.getItem('USER_POSITION');
var USER_POSITION = (up && up.lat instanceof Number && up.lng instanceof Number)?{lat:up.lat,lng:up.lng}:{lat: 59.996651699999994, lng: 30.1950724};
function updateUserPosition() {
    navigator.geolocation.getCurrentPosition(function (position) {
        USER_POSITION = {lat: position.coords.latitude, lng: position.coords.longitude};
        localStorage.setItem('USER_POSITION',USER_POSITION);
    }, function (err) {
        console.log('ERROR(' + err.code + '): ' + err.message);
    });
};
updateUserPosition();
setTimeout(function () {
    $('p.alert').hide();
}, 5800);
wordForPointType = function(type)
{
    switch(type)
    {
        case "message": return "сообщение";
        case "marker": return "событие";
        case "shop": return "магазин";
        case "bar": return "бар";
    }
};
//TODO: протестировать!
//$(document).on('touchstart',function(e){ e.preventDefault(); });
//$(document).on('touchmove',function(e){ e.preventDefault(); });
